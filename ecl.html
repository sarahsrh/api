 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/momentjs/2.14.1/moment-with-locales.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.8.0/js/bootstrap-datepicker.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.8.0/css/bootstrap-datepicker.standalone.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.4/js/standalone/selectize.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.4/css/selectize.bootstrap3.min.css">

<html>
<head>
<title>ECL Page Tester</title>
<link rel="icon" href="data:,">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {background-color:#ffffff;background-repeat:no-repeat;background-position:top left;background-attachment:fixed;}
h1{font-family:Arial, sans-serif;color:#8f2b00;background-color:#ffffff;}
p {font-family:Georgia, serif;font-size:14px;font-style:normal;font-weight:normal;color:#000000;background-color:#ffffff;}
.myButton {
	box-shadow:inset 0px 1px 0px 0px #ffffff;
	background:linear-gradient(to bottom, #f9f9f9 5%, #e9e9e9 100%);
	background-color:#f9f9f9;
	border-radius:6px;
	border:1px solid #dcdcdc;
	display:inline-block;
	cursor:pointer;
	color:#666666;
	font-family:Arial;
	font-size:16px;
	font-weight:bold;
	padding:6px 24px;
	text-decoration:none;
	text-shadow:0px 1px 0px #ffffff;
	&:hover {
	background:linear-gradient(to bottom, #e9e9e9 5%, #f9f9f9 100%);
	background-color:#e9e9e9;
}
 &:active {
	position:relative;
	top:1px;
}
}

form.form-example {
    display: table;
	
}

div.form-example {
    display: table-row;
	
}

label,
input {
    display: table-cell;
    margin-bottom: 10px;
}

label {
    padding-right: 10px;
}
/*custom font*/
@import url(https://fonts.googleapis.com/css?family=Montserrat);

/*basic reset*/
* {margin: 0; padding: 0;}

html {
  height: 100%;
  /*Image only BG fallback*/
  
  /*background = gradient + image pattern combo*/
  background: 
    linear-gradient(rgba(196, 102, 0, 0.6), rgba(155, 89, 182, 0.6));
}

body {
  font-family: montserrat, arial, verdana;
}
/*form styles*/
#msform {
  width: 400px;
  margin: 50px auto;
  text-align: center;
  position: relative;
}
#msform fieldset {
  background: white;
  border: 0 none;
  border-radius: 3px;
  box-shadow: 0 0 15px 1px rgba(0, 0, 0, 0.4);
  padding: 20px 30px;
  box-sizing: border-box;
  width: 80%;
  margin: 0 10%;
  
  /*stacking fieldsets above each other*/
  position: relative;
}
/*Hide all except first fieldset*/
#msform fieldset:not(:first-of-type) {
  display: none;
}
/*inputs*/
#msform input, #msform textarea {
  padding: 15px;
  border: 1px solid #ccc;
  border-radius: 3px;
  margin-bottom: 10px;
  width: 100%;
  box-sizing: border-box;
  font-family: montserrat;
  color: #2C3E50;
  font-size: 13px;
}
/*buttons*/
#msform .action-button {
  width: 100px;
  background: grey;
  font-weight: bold;
  color: white;
  border: 0 none;
  border-radius: 1px;
  cursor: pointer;
  padding: 10px;
  margin: 10px 5px;
  text-decoration: none;
  font-size: 14px;
}
#msform .action-button:hover, #msform .action-button:focus {
  box-shadow: 0 0 0 2px white, 0 0 0 3px #27AE60;
}
/*headings*/
.fs-title {
  text-align: center;
  font-size: 20px;
  text-transform: uppercase;
  color: #2C3E50;
  margin-bottom: 10px;
}
.fs-subtitle {
  font-weight: normal;
  font-size: 13px;
  color: #666;
  margin-bottom: 20px;
}
/*progressbar*/
#progressbar {
  margin-bottom: 30px;
  overflow: hidden;
  /*CSS counters to number the steps*/
  counter-reset: step;
}
#progressbar li {
  list-style-type: none;
  color: white;
  text-transform: uppercase;
  font-size: 9px;
  width: 33.33%;
  float: left;
  position: relative;
}
#progressbar li:before {
  content: counter(step);
  counter-increment: step;
  width: 20px;
  line-height: 20px;
  display: block;
  font-size: 10px;
  color: #333;
  background: white;
  border-radius: 3px;
  margin: 0 auto 5px auto;
}
/*progressbar connectors*/
#progressbar li:after {
  content: '';
  width: 100%;
  height: 2px;
  background: white;
  position: absolute;
  left: -50%;
  top: 9px;
  z-index: -1; /*put it behind the numbers*/
}
#progressbar li:first-child:after {
  /*connector not needed before the first step*/
  content: none; 
}
/*marking active/completed steps green*/
/*The number of the step and the connector before it = green*/
#progressbar li.active:before,  #progressbar li.active:after{
  background: #27AE60;
  color: white;
}

</style>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NW2JT8F');</script>
<!-- End Google Tag Manager -->

</head>

<body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NW2JT8F"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<br><br><br><br><br>
<h2 class="fs-title">Enhanced Conversion Form</h2>

<form action="" method="get" id="msform">
   <div class="form-example">
    <label for="first_name">First name: </label>
    <input type="text" name="name" id="first_name" required>
  </div>
    <div class="form-example">
    <label for="last_name">Last name: </label>
    <input type="text" name="name" id="last_name" required>
  </div>
  <div class="form-example">
    <label for="email">Email: </label>
    <input type="email" name="email" id="email" required>
  </div>
    <div class="form-example">
    <label for="phone">Phone Number: </label>
    <input type="phone" name="phone" id="phone" required>
  </div>
   <div id="alert" class='alert'></div> 
    <input type="button" name="next" class="next action-button" value="Submit" onClick="submitForm()">
	<input type = "button" name="conversion" class="next action-button" value="Conversion" onclick="pushPurchaseDatalayer()"><br><br><br>
	<br>
</form>
<br>
<br>
<script>
var myArr= window.location.pathname;
console.log(myArr);

function submitForm() {
 document.getElementById('alert').innerHTML = '';
    if($('#first_name').val()==''){
      document.getElementById('alert').innerHTML = 'Please input first name!';
    }
    else if($('#last_name').val()==''){
      document.getElementById('alert').innerHTML = 'Please input last name!';
    }
    else if($('#email').val()==''){
      document.getElementById('alert').innerHTML = 'Please input email!';
    }
    else if($('#phone').val()==''){
      document.getElementById('alert').innerHTML = 'Please input phone number!';
    }
    else{
		document.getElementById('alert').innerHTML = '';
		var first_name = $("#first_name").val();
		var last_name = $("#last_name").val();
		var email = $("#email").val();
		var phone = $("#phone").val();

		window.dataLayer.push({
		  'event': 'leads_data',
		  'first_name': first_name,
		  'last_name': last_name,
		  'email': email,
		  'phone': phone,
		  'country': "Indonesia",
		  'postal_code':"11480"

		  });
	}
}

<!-- var formData = $("#msform").serializeArray(); -->
<!-- let csv = "data:text/csv;charset=utf-8,"; // accept data as CSV -->

<!-- formData.forEach(function(item) { -->
<!-- console.log(item.value); -->
  <!-- csv += item.value + ";"; // concat form value on csv var and add ; to create columns (you can change to , if want) -->
<!-- }); -->

<!-- var encodedUri = encodeURI(csv); -->

<!-- // if you want to download -->
<!-- var downloadLink = document.createElement("a"); -->
<!-- downloadLink.setAttribute("download", "FILENAME.csv"); -->
<!-- downloadLink.setAttribute("href", encodedUri); -->
<!-- document.body.appendChild(downloadLink); // Required for FF -->
<!-- downloadLink.click(); -->
<!-- downloadLink.remove(); -->



 function pushPurchaseDatalayer()
{
     window.dataLayer.push({
	  'event': 'purchase',
	  'event_category': 'ecommerce',
	  'event_action': 'purchase',
	  'event_label': 'purchase',
	  'ecommerce': {
		'purchase': {
		  'actionField': {
			'id': 'T1T1T2',                         // Transaction ID. Required for purchases and refunds.
			'affiliation': 'Online Store',
			'revenue': '150000',                     // Total transaction value (incl. tax and shipping)
			'tax':'4.90',
			'shipping': '5.99',
			'coupon': 'SUMMER_SALE'
		  },
		  'products': [{                           
			'name': 'celana baru',     // Name or ID is required.
			'id': '12345',
			'price': '15000',
			'brand': 'Google',
			'category': 'Apparel',
			'variant': 'Gray',
			'quantity': '10',
			'currency': 'IDR'
		  }]
		}
	  }
	});
}

</script>
</html>