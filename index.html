<html>
<head>
<title>IOD Page Tester</title>
<link rel="icon" href="data:,">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {background-color:#ffffff;background-repeat:no-repeat;background-position:top left;background-attachment:fixed;}
h1{font-family:Arial, sans-serif;color:#8f2b00;background-color:#ffffff;}
p {font-family:Georgia, serif;font-size:14px;font-style:normal;font-weight:normal;color:#000000;background-color:#ffffff;}
.myButton {
	box-shadow:inset 0px 1px 0px 0px #ffffff;
	background:linear-gradient(to bottom, #f9f9f9 5%, #e9e9e9 100%);
	background-color:#f9f9f9;
	border-radius:6px;
	border:1px solid #dcdcdc;
	display:inline-block;
	cursor:pointer;
	color:#666666;
	font-family:Arial;
	font-size:16px;
	font-weight:bold;
	padding:6px 24px;
	text-decoration:none;
	text-shadow:0px 1px 0px #ffffff;
	&:hover {
	background:linear-gradient(to bottom, #e9e9e9 5%, #f9f9f9 100%);
	background-color:#e9e9e9;
}
 &:active {
	position:relative;
	top:1px;
}
</style>

<!--
    <meta http-equiv="Content-Security-Policy" content="default-src 'self';
          script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.google.co.id https://www.google.com https://ssl.google-analytics.com 
		  https://www.google-analytics.com https://www.googletagmanager.com https://tagmanager.google.com; img-src: www.googletagmanager.com;
		  style-src 'self' 'unsafe-inline' https://tagmanager.google.com https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com https://fonts.googleapis.com https://themes.googleusercontent.com data:; frame-src 'self' https://bid.g.doubleclick.net https://www.facebook.com; 
		  connect-src 'self' https://www.google-analytics.com https://analytics.google.com https://ssl.google-analytics.com https://stats.g.doubleclick.net https://rum-collector-2.pingdom.net https://www.facebook.com https://*.jixie.io https://*.eskimi.com; object-src 'none'">
 -->
	<!-- Google Tag Manager -->
	
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NW2JT8F');</script>
<!-- End Google Tag Manager -->
<h1>IOD Page Tester</h1>

<script type="text/javascript">
!function(){"use strict";!function(e,t){var n=e.amplitude||{_q:[],_iq:{}};if(n.invoked)e.console&&console.error&&console.error("Amplitude snippet has been loaded.");else{var r=function(e,t){e.prototype[t]=function(){return this._q.push({name:t,args:Array.prototype.slice.call(arguments,0)}),this}},s=function(e,t,n){return function(r){e._q.push({name:t,args:Array.prototype.slice.call(n,0),resolve:r})}},o=function(e,t,n){e[t]=function(){if(n)return{promise:new Promise(s(e,t,Array.prototype.slice.call(arguments)))}}},i=function(e){for(var t=0;t<m.length;t++)o(e,m[t],!1);for(var n=0;n<g.length;n++)o(e,g[n],!0)};n.invoked=!0;var u=t.createElement("script");u.type="text/javascript",u.integrity="sha384-x0ik2D45ZDEEEpYpEuDpmj05fY91P7EOZkgdKmq4dKL/ZAVcufJ+nULFtGn0HIZE",u.crossOrigin="anonymous",u.async=!0,u.src="https://cdn.amplitude.com/libs/analytics-browser-2.0.0-min.js.gz",u.onload=function(){e.amplitude.runQueuedFunctions||console.log("[Amplitude] Error: could not load SDK")};var a=t.getElementsByTagName("script")[0];a.parentNode.insertBefore(u,a);for(var c=function(){return this._q=[],this},p=["add","append","clearAll","prepend","set","setOnce","unset","preInsert","postInsert","remove","getUserProperties"],l=0;l<p.length;l++)r(c,p[l]);n.Identify=c;for(var d=function(){return this._q=[],this},f=["getEventProperties","setProductId","setQuantity","setPrice","setRevenue","setRevenueType","setEventProperties"],v=0;v<f.length;v++)r(d,f[v]);n.Revenue=d;var m=["getDeviceId","setDeviceId","getSessionId","setSessionId","getUserId","setUserId","setOptOut","setTransport","reset","extendSession"],g=["init","add","remove","track","logEvent","identify","groupIdentify","setGroup","revenue","flush"];i(n),n.createInstance=function(e){return n._iq[e]={_q:[]},i(n._iq[e]),n._iq[e]},e.amplitude=n}}(window,document)}();

amplitude.init('6d8f9e3417d0187d3bcdc3890aa49789');
</script>

</head>

<body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NW2JT8F"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<br>
<input type = "button" class="myButton" id = "amppage" value = "AMP" onclick="loadAMPPage()">
<input type = "button" class="myButton" id = "enhancedconv" value = "ECL" onclick="loadECLPage()"><br><br><br>
<input type = "button" class="myButton" id = "fbmeta" value = "Facebook login with meta script" onclick="loadFBwithMeta()">
<input type = "button" class="myButton" id = "fb" value = "Facebook login without meta script" onclick="loadFBwithoutMeta()"><br>
<input type = "button" class="myButton" id = "gtagpage" value = "GTAG Page" onclick="loadGTAGPage()"><br>
<input type = "button" class="myButton" id = "nonlogin" value = "Push Bukan Login" onclick="pushBukanLogin()"><br>
<input type = "button" class="myButton" id = "testuserprop" value = "Test User Prop"><br>

<br><br>
<input type = "button" class="myButton" id = "promo" value = "Push Promo View & Click - no promo" onclick="pushPromo()">
<input type = "button" class="myButton" id = "product_tanpa_promo" value = "Push Prod View & Click & PDP - no promo" onclick="pushProduct()"><br>
<input type = "button" class="myButton" id = "atcco_tanpa_promo" value = "Push ATC & CO - no promo" onclick="pushAtcCO()"><br>
<input type = "button" class="myButton" id = "purchase_tanpa_promo" value = "Push Purchase - no promo" onclick="pushPurchase()"><br>
<br><br>
<input type = "button" class="myButton" id = "product_promo" value = "Push Prod View & Click & PDP - promo" onclick="pushProductPromo()"><br>
<input type = "button" class="myButton" id = "atcco_promo" value = "Push ATC & CO - promo" onclick="pushAtcCOPromo()"><br>
<input type = "button" class="myButton" id = "purchase_promo" value = "Push Purchase - promo" onclick="pushPurchasePromo()"><br>

<br>
<br>
</body>

<br>
<script>
var myArr= window.location.pathname;
console.log(myArr);

 function loadAMPPage()
{
     window.location="amp.html";
}

function loadECLPage()
{
     window.location="ecl.html";
}

 function loadFBwithMeta()
{
      window.location="login_with_meta.html";
}

 function loadFBwithoutMeta()
{
      window.location="login_without_meta.html";
}


 function loadGTAGPage()
{
      window.location="gtag.html";
}

function pushBukanLogin(){
const customDestination = (customUrl: string): DestinationPlugin => {
  return {
    type: 'destination',
    execute: async (event: Event) => {
      const payload = {
        k: 'apikey',
        d: event,
      };

      const response = await fetch(customUrl, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          Accept: '*/*',
        },
        body: JSON.stringify(payload),
      });

      return {
        code: response.status,
        event: event,
        message: response.statusText,
      };
    },
  };
};
}

amplitude.init('6d8f9e3417d0187d3bcdc3890aa49789');
amplitude.add(myDestinationPlugin('https://googletagmanager.com'));
{

const eventProperties = {
  'event_category': 'dari_amplitude',
};
amplitude.track('generalEventAmpli', eventProperties);
	window.dataLayer.push({
		'event':'generalEvent',
		'event_category': "dari_code",
		'event_action': "clickcc",
		'event_label':123456,
		'userId':"22222"
	});
}

function pushPromo()
{
amplitude.track('SignUp');
	window.dataLayer.push({
	'event':'promotionView',
	'event_category':'ecommerce',
	'event_action':'promo',
	'event_label':'promo',
	'ecommerce': {
		'promoView': {
		  'promotions': [                     // Array of promoFieldObjects.
		   {
			 'id': 'testgtm',            // ID or Name is required.
			 'name': 'diskonlagi',
			 'creative': 'banner1',
			 'position': 'slot1'
		   }]
		}
	}
	});
	window.dataLayer.push({
	'event':'promotionClick',
	'event_category':'ecommerce',
	'event_action':'promo_click',
	'event_label':'click',
	'ecommerce': {
		'promoClick': {
		  'promotions': [                     // Array of promoFieldObjects.
		   {
			 'id': 'testgtm',            // ID or Name is required.
			 'name': 'diskonlagi',
			 'creative': 'banner1',
			 'position': 'slot1'
		   }]
		}
	}
	});
}
function pushProduct(){
	window.dataLayer.push({
	'event':'view_item_list',
	'event_category': 'ecommerce',
	'event_action': 'list view',
	'event_label': 'list view',
	'ecommerce': {
		'currencyCode': 'EUR',                       
		'impressions': [
		 {
		   'name': 'celana baru',       
		   'id': '12345',
		   'price': '15000',
		   'brand': 'Google',
		   'category': 'Apparel',
		   'variant': 'Gray',
		   'position': '1'
		 }]
		}
	});
	
	window.dataLayer.push({
	  'event': 'productClick',
	  'event_category': 'ecommerce',
	  'event_action': 'click',
	  'event_label': 'click',
	  'ecommerce': {
		'click': {
		  'actionField': {
			'list': 'list aja',
			'action': 'click'
		  },
		  'products': [
			{
			  'name': 'celana baru',
			  'id': '12345',
			  'price': '15000',
			  'brand': 'Google',
			  'category': 'Apparel',
			  'variant': 'Gray',
			  'position': '1'
			}
		  ]
		}
	  }
	})
	
	window.dataLayer.push({
	  'event': 'pdp_view',
	  'event_category': 'ecommerce',
	  'event_action': 'pdp',
	  'event_label': 'pdp',
	  'ecommerce': {
		'detail': {
		  'products': [
			{
			  'name': 'celana baru',
			  'id': '12345',
			  'price': '15000',
			  'brand': 'Google',
			  'category': 'Apparel',
			  'variant': 'Gray'
			}
		  ]
		}
	  }
	})
}

 function pushAtcCO()
{
	window.dataLayer.push({
	  'event': 'atc',
	  'event_category': 'ecommerce',
	  'event_action': 'atc',
	  'event_label': 'atc',
	  'ecommerce': {
		'add': {
		  'products': [
			{
			  'name': 'celana baru',
			  'id': '12345',
			  'price': '15000',
			  'brand': 'Google',
			  'category': 'Apparel',
			  'variant': 'Gray'      
			}
		  ]
		}
	  }
	})
	
	window.dataLayer.push({
	  'event': 'begin_co',
	  'event_category': 'ecommerce',
	  'event_action': 'co',
	  'event_label': 'co',
	  'ecommerce': {
		'checkout': {
		  'actionField': {'step': 1, 'option': 'Visa'},
		  'products': [
			{
			  'name': 'celana baru',
			  'id': '12345',
			  'price': '15000',
			  'brand': 'Google',
			  'category': 'Apparel',
			  'variant': 'Gray'
			}
		  ]
		}
	  }
	})
}

 function pushPurchase()
{
      
	window.dataLayer.push({
	  'event': 'purchase',
	  'event_category': 'ecommerce',
	  'event_action': 'purchase',
	  'event_label': 'purchase',
	  'ecommerce': {
		'purchase': {
		  'actionField': {
			'id': 'T1T1T2',                         // Transaction ID. Required for purchases and refunds.
			'affiliation': 'Online Store',
			'revenue': '150000',                     // Total transaction value (incl. tax and shipping)
			'tax':'4.90',
			'shipping': '5.99',
			'coupon': 'SUMMER_SALE'
		  },
		  'products': [{                           
			'name': 'celana baru',     // Name or ID is required.
			'id': '12345',
			'price': '15000',
			'brand': 'Google',
			'category': 'Apparel',
			'variant': 'Gray',
			'quantity': '10',
			'currency': 'IDR'
		  }]
		}
	  }
	});
}




//withpromo


function pushProductPromo(){
	window.dataLayer.push({
	'event':'view_item_list',
	'event_category': 'ecommercepromo',
	'event_action': 'list view',
	'event_label': 'list view',
	'ecommerce': {
		'currencyCode': 'EUR',                       
		'impressions': [
		 {
		   'name': 'celana diskon',       
		   'id': '12345',
		   'price': '15000',
		   'brand': 'Google',
		   'category': 'Apparel',
		   'variant': 'Gray',
		   'position': '1',
		   'promotion_name':'diskonlagi',
		   'list': 'list list baru' 
		 }]
		}
	});
	
	window.dataLayer.push({
	  'event': 'productClick',
	  'event_category': 'ecommercepromo',
	  'event_action': 'click',
	  'event_label': 'click',
	  'ecommerce': {
		'click': {
		  'actionField': {
			'list': 'list list baru',
			'action': 'click'
		  },
		  'products': [
			{
			  'name': 'celana diskon',
			  'id': '12345',
			  'price': '15000',
			  'brand': 'Google',
			  'category': 'Apparel',
			  'variant': 'Gray',
			  'position': '1',
			  'promotion_name':'diskonlagi',
			  'list': 'list list baru' 
			}
		  ]
		}
	  }
	})
	
	window.dataLayer.push({
	  'event': 'pdp_view',
	  'event_category': 'ecommercepromo',
	  'event_action': 'pdp',
	  'event_label': 'pdp',
	  'ecommerce': {
		'detail': {
		  'products': [
			{
			  'name': 'celana diskon',
			  'id': '12345',
			  'price': '15000',
			  'brand': 'Google',
			  'category': 'Apparel',
			  'variant': 'Gray',
			  'promotion_name':'diskonlagi',
			  'list': 'list list baru' 
			}
		  ]
		}
	  }
	})
}

 function pushAtcCOPromo()
{
	window.dataLayer.push({
	  'event': 'atc',
	  'event_category': 'ecommercepromo',
	  'event_action': 'atc',
	  'event_label': 'atc',
	  'ecommerce': {
		'add': {
		  'products': [
			{
			  'name': 'celana diskon',
			  'id': '12345',
			  'price': '15000',
			  'brand': 'Google',
			  'category': 'Apparel',
			  'variant': 'Gray',
			  'promotion_name':'diskonlagi',
			  'list': 'list list baru'       
			}
		  ]
		}
	  }
	})
	
	window.dataLayer.push({
	  'event': 'begin_co',
	  'event_category': 'ecommercepromo',
	  'event_action': 'co',
	  'event_label': 'co',
	  'ecommerce': {
		'checkout': {
		  'actionField': {'step': 1, 'option': 'Visa'},
		  'products': [
			{
			  'name': 'celana diskon',
			  'id': '12345',
			  'price': '15000',
			  'brand': 'Google',
			  'category': 'Apparel',
			  'variant': 'Gray',
			  'promotion_name':'diskonlagi',
			  'list': 'list list baru' 
			}
		  ]
		}
	  }
	})
}

 function pushPurchasePromo()
{
      
	window.dataLayer.push({
	  'event': 'purchase',
	  'event_category': 'ecommercepromo',
	  'event_action': 'purchase',
	  'event_label': 'purchase',
	  'ecommerce': {
		'purchase': {
		  'actionField': {
			'id': 'T1T1T2',                         // Transaction ID. Required for purchases and refunds.
			'affiliation': 'Online Store',
			'revenue': '150000',                     // Total transaction value (incl. tax and shipping)
			'tax':'4.90',
			'shipping': '5.99',
			'coupon': 'SUMMER_SALE'
		  },
		  'products': [{                           
			'name': 'celana diskon',     // Name or ID is required.
			'id': '12345',
			'price': '15000',
			'brand': 'Google',
			'category': 'Apparel',
			'variant': 'Gray',
			'quantity': '10',
			'currency': 'IDR',
			'promotion_name':'diskonlagi',
			'list': 'list list baru' 
		  }]
		}
	  }
	});
}


</script>
</html>